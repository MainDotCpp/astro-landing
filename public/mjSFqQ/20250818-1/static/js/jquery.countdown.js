(function(){(function(a){a.countdown=function(d,c){var b,e=this;this.el=d;this.$el=a(d);this.$el.data("countdown",this);this.init=function(){e.options=a.extend({},a.countdown.defaultOptions,c);if(e.options.refresh){e.interval=setInterval(function(){return e.render()},e.options.refresh)}e.render();return e};b=function(h){var f,g;h=Date.parse(a.isPlainObject(e.options.date)?e.options.date:new Date(e.options.date));g=(h-Date.parse(new Date))/1000;if(g<=0){g=0;if(e.interval){e.stop()}e.options.onEnd.apply(e)}f={years:0,days:0,hours:0,min:0,sec:0,millisec:0};if(g>=(365.25*86400)){f.years=Math.floor(g/(365.25*86400));g-=f.years*365.25*86400}if(g>=86400){f.days=Math.floor(g/86400);g-=f.days*86400}if(g>=3600){f.hours=Math.floor(g/3600);g-=f.hours*3600}if(g>=60){f.min=Math.floor(g/60);g-=f.min*60}f.sec=g;return f};this.leadingZeros=function(f,g){if(g==null){g=2}f=String(f);while(f.length<g){f="0"+f}return f};this.update=function(f){e.options.date=f;return e};this.render=function(){e.options.render.apply(e,[b(e.options.date)]);return e};this.stop=function(){if(e.interval){clearInterval(e.interval)}e.interval=null;return e};this.start=function(f){if(f==null){f=e.options.refresh||a.countdown.defaultOptions.refresh}if(e.interval){clearInterval(e.interval)}e.render();e.options.refresh=f;e.interval=setInterval(function(){return e.render()},e.options.refresh);return e};return this.init()};a.countdown.defaultOptions={date:"June 7, 2087 15:03:25",refresh:1000,onEnd:a.noop,render:function(b){return a(this.el).html(""+b.years+" years, "+b.days+" days, "+(this.leadingZeros(b.hours))+" hours, "+(this.leadingZeros(b.min))+" min and "+(this.leadingZeros(b.sec))+" sec")}};a.fn.countdown=function(b){return a.each(this,function(d,e){var c;c=a(e);if(!c.data("countdown")){return c.data("countdown",new a.countdown(e,b))}})};return void 0})(jQuery)}).call(this);